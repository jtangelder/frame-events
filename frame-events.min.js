!function(a){function b(a,b,c){this.manager=a,this.element=b,this.eventType=c,this.handlers=[],this.element.addEventListener(c,this.frameEvent.bind(this),!1)}function c(){this.events={},this.raf=a.requestAnimationFrame,this.uidp="__feuid",this.ticking=!1,this.uid=1}b.prototype.frameEvent=function(a){this.handlers.forEach(function(b){b.dataHandler&&(b.data=b.dataHandler(a))}),this.eventData=a,this.manager.requestTick(this)},b.prototype.triggerHandlers=function(){this.eventData&&(this.handlers.forEach(function(a){a.eventHandler(this.eventData,a.data)}.bind(this)),this.eventData=null)},b.prototype.destroy=function(){this.element.removeEventListener(this.eventType,this.frameEvent)},c.prototype.on=function(a,c,d,e){var f=a[this.uidp]||(a[this.uidp]=this.uid++);this.events[f]||(this.events[f]={}),this.events[f][c]||(this.events[f][c]=new b(this,a,c)),this.events[f][c].handlers.push({eventHandler:d,dataHandler:e})},c.prototype.off=function(a,b,c){var e,d=a[this.uidp];d&&this.events[d]&&this.events[d][b]&&(e=this.events[d][b].handlers,e.forEach(function(a,b){c===a.eventHandler&&e.splice(b,1)}),e.length||(this.events[d][b].destroy(),delete this.events[d][b]))},c.prototype.triggerEvents=function(){var a,b;for(a in this.events)for(b in this.events[a])this.events[a][b].triggerHandlers();this.ticking=!1},c.prototype.requestTick=function(){this.ticking||(this.ticking=!0,this.raf.call(a,this.triggerEvents.bind(this)))},"undefined"!=typeof module&&module.exports?module.exports=new c:a.FrameEvents=new c}(window);